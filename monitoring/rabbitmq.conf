# RabbitMQ Configuration for DDOBANG Hybrid Notification System

# 기본 설정
loopback_users.guest = false
listeners.tcp.default = 5672
management.tcp.port = 15672

# 성능 최적화
vm_memory_high_watermark.relative = 0.6
disk_free_limit.relative = 2.0

# 연결 및 채널 제한
max_connections = 1000
max_channels_per_connection = 100

# 큐 설정
queue_master_locator = min-masters
max_message_size = 134217728

# 클러스터 설정 (단일 노드)
cluster_formation.peer_discovery_backend = rabbit_peer_discovery_classic_config
cluster_formation.classic_config.nodes.1 = rabbit@rabbitmq

# 로깅
log.console = true
log.console.level = info
log.file = false

# 메트릭 및 모니터링
management.rates_mode = basic
management.sample_retention_policies.global.minute = 5
management.sample_retention_policies.global.hour = 60
management.sample_retention_policies.global.day = 1440

# SSL/TLS (개발환경에서는 비활성화)
listeners.ssl = none

# Prometheus Plugin (선택적)
prometheus.return_per_object_metrics = true
prometheus.compact_tables = true

# 메모리 및 디스크 알림
vm_memory_high_watermark_paging_ratio = 0.5
disk_free_limit.absolute = 2GB

# 헬스체크 설정
health_check_heartbeat = 30
heartbeat = 30